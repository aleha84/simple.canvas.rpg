function getRandom(n,t){return Math.random()*(t-n)+n}function getRandomInt(n,t){return Math.round(getRandom(n,t))}function boxIntersectsBox(n,t){return Math.abs(n.center.x-t.center.x)*2<n.size.x+t.size.x&&Math.abs(n.center.y-t.center.y)*2<n.size.y+t.size.y}function radiansToDegree(n){return n===undefined?0:n*180/Math.PI}function degreeToRadians(n){return n===undefined?0:n*Math.PI/180}function isBoolean(n){return n.constructor===Boolean||typeof n=="boolean"}function isString(){return typeof myVar=="string"||myVar instanceof String}function isArray(n){return Object.prototype.toString.call(n)==="[object Array]"}function isFunction(n){return typeof n=="function"}function absorbTouchEvent(n){if(n.type=="touchstart"||n.type=="touchmove"||n.type=="touchend"||n.type=="touchcancel"){var t=n||window.event;return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,t.returnValue=!1,!1}}function checkClamps(n,t){return!isArray(n)||isEmpty(n)?1:(t>n[1]?t=n[1]:t<n[0]&&(t=n[0]),t==n[0]||t==n[1])?-1:1}function isBetween(n,t,i){if(t>i){var r=i;i=t;t=r}return n>=t&&n<=i}function isEmpty(n){if(n==null)return!0;if(n.length>0)return!1;if(n.length===0)return!0;for(var t in n)if(hasOwnProperty.call(n,t))return!1;return!0}function sqr(n){return n*n}function dist2(n,t){return sqr(n.x-t.x)+sqr(n.y-t.y)}function distToSegmentSquared(n,t,i){var u=dist2(t,i),r;return u==0?dist2(n,t):(r=((n.x-t.x)*(i.x-t.x)+(n.y-t.y)*(i.y-t.y))/u,r<0)?dist2(n,t):r>1?dist2(n,i):dist2(n,{x:t.x+r*(i.x-t.x),y:t.y+r*(i.y-t.y)})}function distToSegment(n,t,i){return Math.sqrt(distToSegmentSquared(n,t,i))}function getDegreeToVectorUp(n,t){var i=Vector2.up(),r=t.substract(n,!0);return Math.acos(r.mulVector(i)/(r.module()*i.module()))}function doWorkByTimer(n,t){if(SCG.gameLogics.isPaused){n.delta=0;return}n.delta=t-n.lastTimeWork;SCG.gameLogics.pauseDelta!=0&&(n.delta-=SCG.gameLogics.pauseDelta);n.currentDelay-=n.delta;n.currentDelay<=0&&(n.currentDelay=n.originDelay,n.doWorkInternal.call(n.context));n.lastTimeWork=t}function extend(){var f,u,i,t,e,o,n=arguments[0]||{},r=1,h=arguments.length,s=!1;for(typeof n=="boolean"&&(s=n,n=arguments[r]||{},r++),typeof n=="object"||isFunction(n)||(n={}),r===h&&(n=this,r--);r<h;r++)if((f=arguments[r])!=null)for(u in f)(i=n[u],t=f[u],n!==t)&&(s&&t&&(isPlainObject(t)||(e=isArray(t)))?(e?(e=!1,o=i&&isArray(i)?i:[]):o=i&&isPlainObject(i)?i:{},n[u]=extend(s,o,t)):t!==undefined&&(n[u]=t));return n}function isPlainObject(n){var t,i,f=Object.prototype.toString,r=Object.prototype.hasOwnProperty,u=r.toString,e=u.call(Object);return!n||f.call(n)!=="[object Object]"?!1:(t=getProto(n),!t)?!0:(i=r.call(t,"constructor")&&t.constructor,typeof i=="function"&&u.call(i)===e)}function getDOMByClassName(n){var t=undefined,i=document.getElementsByClassName(n);return i.length>0&&(t=i[0]),t}function appendDomElement(n,t,i){if(!(n instanceof HTMLElement)&&!(n instanceof HTMLDocument)&&!(n instanceof HTMLBodyElement))throw"Cant append new element to non html Node";if(t!=undefined&&typeof t!="string")throw"Type must be a string";var r=document.createElement(t);return setAttributes(r,i),n.appendChild(r),r}function setAttributes(n,t){var i,r,u,f,e;for(i in t)if(t.hasOwnProperty(i))if(i=="on"){r=t[i];for(u in r)r.hasOwnProperty(u)&&n.addEventListener(u,r[u],!1)}else if(i=="css"){f=t[i];for(e in f)f.hasOwnProperty(e)&&(n.style[e]=f[e])}else n.setAttribute(i,t[i])}function addListenerMulti(n,t,i){t.split(" ").forEach(function(t){n.addEventListener(t,i,!1)})}function drawFigures(n,t,i){var f,u,e,r;for(n.save(),n.lineJoin="bevel",i==undefined&&(i.alpha=1),n.globalAlpha=i.alpha,f=0;f<t.length;f++)if(u=t[f],!i.fill||!(u.length<3)){for(n.beginPath(),n.moveTo(u[0].x,u[0].y),e=1;e<u.length;e++)r=u[e],r instanceof Vector2&&(r={p:r,type:"line"}),r.type=="line"?n.lineTo(r.p.x,r.p.y):r.type=="curve"&&n.quadraticCurveTo(r.control.x,r.control.y,r.p.x,r.p.y);i.fill&&(n.fillStyle=i.fill,n.fill());i.stroke&&(n.strokeStyle=i.stroke,n.stroke())}n.restore()}function Vector2(n,t){typeof n=="object"?(t=n.y,n=n.x):(n==undefined&&(n=0),t==undefined&&(t=0));this.x=n;this.y=t}var pointerEventToXY=function(n){var t={x:0,y:0},i;return n.type=="touchstart"||n.type=="touchmove"||n.type=="touchend"||n.type=="touchcancel"?(i=n.touches[0]||n.changedTouches[0],t.x=i.pageX,t.y=i.pageY):(n.type=="mousedown"||n.type=="mouseup"||n.type=="mousemove"||n.type=="mouseover"||n.type=="mouseout"||n.type=="mouseenter"||n.type=="mouseleave"||n.type=="click")&&(t.x=n.pageX,t.y=n.pageY),t},getProto=Object.getPrototypeOf||function(n){return n.__proto__},V2;Vector2.prototype={distance:function(n){return!n||!(n instanceof Vector2)?undefined:new Vector2(n.x-this.x,n.y-this.y).module()},directionNonNormal:function(n){return!n||!(n instanceof Vector2)?new Vector2:new Vector2(n.x-this.x,n.y-this.y)},direction:function(n){return!n||!(n instanceof Vector2)?new Vector2:new Vector2(n.x-this.x,n.y-this.y).normalize()},normalize:function(){var n=this.module();return this.x/=n,this.y/=n,this},module:function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},add:function(n,t){return t===undefined&&(t=!1),n instanceof Vector2?t?(this.x+=n.x,this.y+=n.y,this):new Vector2(this.x+n.x,this.y+n.y):void 0},substract:function(n,t){return(t===undefined&&(t=!1),n instanceof Vector2)?t?(this.x-=n.x,this.y-=n.y,this):new Vector2(this.x-n.x,this.y-n.y):new Vector2},mul:function(n){return new Vector2(this.x*n,this.y*n)},division:function(n){return new Vector2(this.x/n,this.y/n)},dot:function(n){return this.mulVector(n)},cross:function(n){return!n||!(n instanceof Vector2)?0:this.x*n.y-this.y*n.x},mulVector:function(n){return!n||!(n instanceof Vector2)?0:this.x*n.x+this.y*n.y},rotate:function(n,t,i){t===undefined&&(t=!1);i===undefined&&(i=!1);var r=new Vector2(this.x*Math.cos(t?n:n*Math.PI/180)-this.y*Math.sin(t?n:n*Math.PI/180),this.x*Math.sin(t?n:n*Math.PI/180)+this.y*Math.cos(t?n:n*Math.PI/180));return i?(this.x=r.x,this.y=r.y,this):r},clone:function(){return new Vector2(this.x,this.y)},equal:function(n){return!n||!(n instanceof Vector2)?!1:this.x==n.x&&this.y==n.y},toString:function(){return"x: "+this.x+", y: "+this.y},angleTo:function(n,t){if(!n||!(n instanceof Vector2))throw"Param is not a vetor2 instance";t==undefined&&(t=!1);var i=Math.atan2(this.cross(n),this.dot(n));return t?i:i*180/Math.PI}};Vector2.average=function(n){var i,t;if(!isArray(n)||isEmpty(n))throw"Param is not defined";for(i=new Vector2,t=0;t<n.length;t++)i.add(n[t],!0);return i.division(n.length)};Vector2.left=function(){return new Vector2(-1,0)};Vector2.right=function(){return new Vector2(1,0)};Vector2.up=function(){return new Vector2(0,-1)};Vector2.down=function(){return new Vector2(0,1)};V2=Vector2;